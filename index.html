<!DOCTYPE html>
<html>
<head>
	<title>Procrastination.js</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<link rel="stylesheet" href="style.css" type="text/css" media="screen" charset="utf-8">
	<script src="lib/jquery.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="lib/procrastination.js" type="text/javascript" charset="utf-8"></script>
	
	<script type="text/javascript" charset="utf-8">
	$(function(){
		var ƒs = function(i){
			var container = $('#anim-' + i),
					display = container.find('.display'),
					spots = container.find('.timeline .spot'),
					chunks = container.find('.timeline .chunk'),
					groups = container.find('.timeline .group')

			return {
				Pop: Action(function(i, n){
					var s = $(spots.get(i))
					$(chunks.get(i)).addClass('filled')
					s.addClass('blink')
				}),

				Scale: Action(function(i, n){
					var s = $(spots.get(i))
					s.addClass('scale')
					setTimeout(function(){
						s.removeClass('scale')
						n(i)
					}, 500)
				}),

				Show: Action(function(i, n){
					display.addClass('blink')
					display.text(i)
					setTimeout(function(){
						display.removeClass('blink')
						n(i)
					}, 500)
				}),

				Expand: Effect(function(i, n){
					var group = $(groups.get(i))
					group.addClass('expanded')
					setTimeout(function(){
						n(i)
					}, 500)
				}),
				
				1: Effect(function(i, n){
					groups.removeClass('expanded')
					spots.removeClass('blink')
					chunks.removeClass('filled')
					
				}),
				
				start: (function(){

					var gimmeFive = function(n){
						var c = function(i){setTimeout(function(){
							n(i)
							if(i < 4) c(i+1)
						}, 600)}
						c(0)
					}

					return function(n){ 
						$('#start-' + i).bind('click', function(e){
							e.preventDefault()
							gimmeFive(n)
						})
					}
				})()
			}
		}
		
		with(ƒs(1)){
			When(start)
				.await(Pop)
				.subscribe()
		}
		
	})
	</script>
</head>
<body>

	<header>
			<img	class="logo"/>
			<h1>procrastination.js</h1>
		</div>
	</header>

	<div id="content">

		<article class="about">
			TODO: Konami
		</article>

		<article class="docs" id="anim-1">
			<section>
				<h2><span>01</span>Basic</h2>
				<div class="anim-box">
					<div class="timeline">
						<span class="chunk"><span></span></span>
						<span class="chunk"><span></span></span>
						<span class="chunk"><span></span></span>
						<span class="chunk"><span></span></span>

						<span class="spot blink">0</span>
						<span class="spot">1</span>
						<span class="spot">2</span>
						<span class="spot">3</span>
						<span class="spot">4</span>
					</div>
				</div>
				<a href="#" id="start-1">start</a>
			</section>
			<section class="code">
				<pre>
					<code>
When(start)
  .await(Scale)
  .subscribe()
					</code>
				</pre>
			</section>
		</article>
	</div>
</body>
</html>


